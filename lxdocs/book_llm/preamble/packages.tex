\usepackage[a4paper,margin=1in]{geometry}   % Set page size and margins

\PassOptionsToPackage{table}{xcolor}        % resolves dependency clash with tikz package


% ==================================================
% Core Document Setup
% ==================================================
\usepackage{subfiles}                       % Allow compiling subfiles (chapters) independently
\usepackage{amsmath,amssymb}                % Math symbols and environments
\usepackage{xparse}                         % environments/commands creation
\usepackage{caption}                        % Better captions for figures, tables, and listings
\usepackage{tikz}
\usepackage{comment}                        % multi-line comment

% ==================================================
% Unified bibliography with biblatex+biber
% ==================================================
\usepackage[backend=biber,style=authoryear,maxcitenames=2,maxbibnames=99]{biblatex}


% ==================================================
% Best Listings Setup For Copy-Paste issues in pdf
% ==================================================
% \usepackage[T1]{fontenc}
% \usepackage[utf8]{inputenc} 
\usepackage{upquote}            % Makes straight quotes(' ") appear correctly in copied text

% ==================================================
% Table Packages
% ==================================================
\usepackage{booktabs}       % Professional-quality table rules (\toprule, \midrule, \bottomrule)
\usepackage{colortbl}       % Add color shading to table rows and columns
\usepackage{multirow}       % Merge multiple rows in a table cell
\usepackage{longtable}      % Create tables that span multiple pages
\usepackage{array}          % Enhanced column formatting and alignment options
\usepackage[table]{xcolor}  % Define and use colors in tables (extends colortbl)
\usepackage{float}          % Precise table/figure placement using [H]
\usepackage{graphicx}       % Include external images (used in figure examples)
\usepackage{makecell}       % Allow line breaks and formatting inside table cells

% ==================================================
% List and Enumeration Packages
% ==================================================
\usepackage{enumitem}       % Customization of itemize, enumerate, and description lists

% ==================================================
% Code Listings (for showing LaTeX source in the PDF)
% ==================================================
\usepackage{listings}       % Core package for syntax-highlighted code listings
\usepackage{lstautogobble}  % Automatically remove common indentation in code blocks
\usepackage{newfloat}       % Define custom float environments (e.g., for code listings)

% ==================================================
% Custom Float for Listings
% ==================================================
% Define a float type "listing" for displaying code blocks with captions and numbering
\DeclareFloatingEnvironment[
    fileext=lol,
    listname=List of Listings,
    name=Listing
]{listing}

% ==================================================
% Default Style for Code Listings
% ==================================================

% Define custom pastel and subtle colors
\definecolor{codebg}{RGB}{255,250,225}    % pale yellow (change to mint below if desired)
\definecolor{codekw}{RGB}{0,92,197}       % blue keywords
\definecolor{codekw2}{RGB}{163,21,21}     % red-brown keywords
\definecolor{codekw3}{RGB}{127,0,85}      % violet keywords
\definecolor{codestr}{RGB}{0,128,0}       % green strings/return
\definecolor{codecm}{RGB}{120,120,120}    % gray comments
\definecolor{codeid}{RGB}{30,30,30}       % identifiers
\definecolor{codeaccent}{RGB}{255,140,0}  % orange accents
\definecolor{codedelim}{RGB}{180,0,0}     % punctuation

% A lightweight LaTeX language so LaTeX code looks colorful
\lstdefinelanguage{TeXish}{
  sensitive=true,
  morekeywords=[1]{\\begin,\\end,\\usepackage,\\documentclass,\\section,\\subsection,\\emph,\\textbf,\\textit,\\item,\\label,\\ref,\\cite,\\caption,\\includegraphics,\\color,\\lstset,\\lstdefinestyle,\\lstdefinelanguage,\\NewDocumentEnvironment,\\IfBooleanTF,\\IfValueTF,\\centering},
  morekeywords=[2]{\\newcommand,\\renewcommand,\\DeclareMathOperator,\\title,\\author,\\date,\\maketitle,\\includegraphics},
  morekeywords=[3]{\\LaTeX,\\TeX},
  alsoletter=\\,
  morecomment=[l]{\%},
  morestring=[b]",
  morestring=[b]'
}

\lstset{
  basicstyle=\ttfamily\small,                % Monospaced small font
  backgroundcolor=\color{gray!5},            % Light gray background
  frame=single,                              % Draw a box around the code
  breaklines=true,                           % Allow automatic line breaking
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space}, % Indicate wrapped lines
  numbers=none,                              % Line numbers on the left
  keepspaces=true,                           % Preserve spaces exactly as in source
  columns=flexible,                          % Improves copying of tabular alignment
  % numberstyle=\tiny\color{gray},           % Style of line numbers
  captionpos=b,                              % Caption position (bottom)
  autogobble=true,                           % Trim indentation from source
  showstringspaces=false                     % Donâ€™t mark spaces in strings
  % Add only color-oriented styling below:
  language=TeXish,
  keywordstyle=\color{codekw}\bfseries,             % [1]
  keywordstyle={[2]\color{codekw2}\bfseries},       % [2]
  keywordstyle={[3]\color{codekw3}\bfseries},       % [3]
  stringstyle=\color{codestr},
  commentstyle=\color{codecm}\itshape,
  identifierstyle=\color{codeid},
  emph={\return},
  emphstyle=\color{codestr}\bfseries,
  literate=
    {*}{{\textcolor{codedelim}{*}}}1
    {=}{{\textcolor{codedelim}{=}}}1
    {(}{{\textcolor{codedelim}{(}}}1
    {)}{{\textcolor{codedelim}{)}}}1
    {[}{{\textcolor{codedelim}{[}}}1
    {]}{{\textcolor{codedelim}{]}}}1
    {,}{{\textcolor{codedelim}{,}}}1
}
